<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Auth Demo</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="/img/brh-logo.png" type="image/png">
</head>
<body>
  <div id="sidebar-holder"></div>
  <link rel="stylesheet" href="/sidebar.css">
  <script src="/sidebar.js" defer></script>
  <script src="/theme.js" defer></script>
  <!-- Librairies pour lâ€™export PDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.4/dist/jspdf.plugin.autotable.min.js"></script>
  <div id="login-container">
    <h2>Connexion</h2>
    <form id="login-form">
      <input type="email" id="email" placeholder="Email" required />
      <input type="password" id="password" placeholder="Mot de passe" required />
      <button type="submit">Se connecter</button>
    </form>
    <div id="login-error" style="color:red;"></div>
  </div>

  <div id="app-container" style="display:none;">
    <header class="brand-bar">
      <img src="/img/brh-logo.png" class="brand-logo" alt="BÃ¢ti RÃ©nov HÃ´tellerie">
      <div class="brand-actions">
        <button id="logoutBtn">DÃ©connexion</button>
        <button id="themeToggle" data-theme-toggle type="button" title="Basculer clair/sombre">ðŸŒ“</button>
      </div>
    </header>
    <h1>Bienvenue</h1>
    <nav>
      <a href="selection.html" id="nav-selection" class="btn btn-primary">
        Gestion des tÃ¢ches
      </a>
      <button id="historiqueBtn" class="btn btn-secondary">
        Historique des bulles
      </button>
    </nav>
    <div class="filter-group">
      <label for="chantierSelect">Chantier</label>
      <div class="filter-control">
        <select id="chantierSelect"></select>
        <div class="filter-actions">
          <button id="addChantierBtn" class="btn btn-secondary is-hidden" aria-controls="chantierSelect">+ Nouveau chantier</button>
        </div>
      </div>
    </div>

    <div class="filter-group">
      <label for="etageSelect">Ã‰tage</label>
      <div class="filter-control">
        <select id="etageSelect">
          <!-- valeur lisible R+X mais l'identifiant numÃ©rique est dans data-floor-id -->
          <option value="R+0" data-floor-id="0">R+0</option>
          <option value="R+1" data-floor-id="1">R+1</option>
          <option value="R+2" data-floor-id="2">R+2</option>
          <option value="R+3" data-floor-id="3">R+3</option>
          <option value="R+4" data-floor-id="4">R+4</option>
          <option value="R+5" data-floor-id="5">R+5</option>
        </select>
        <div class="filter-actions">
          <button id="addEtageBtn" class="btn btn-secondary is-hidden" aria-controls="etageSelect">+ Nouvel Ã©tage</button>
          <button id="uploadPlanBtn" class="btn btn-secondary is-hidden" aria-controls="uploadPlanInput">ðŸ“Ž Upload plan</button>
        </div>
      </div>
    </div>

    <div class="filter-group">
      <label for="chambreSelect">Chambre</label>
      <div class="filter-control">
        <select id="chambreSelect" data-etage="R+5">
          <option value="total">-- Toutes les chambres --</option>
          <!-- etc. -->
        </select>
        <div class="filter-actions">
          <button id="addRoomBtn" class="btn btn-secondary is-hidden" aria-controls="chambreSelect">+ Nouvelle chambre</button>
        </div>
      </div>
    </div>

    <div class="filter-group">
      <label for="statusFilter">Statut</label>
      <div class="filter-control">
        <select id="statusFilter">
          <option value="">-- Tous les statuts --</option>
          <option value="attente">En attente</option>
          <option value="a_corriger">Ã€ corriger</option>
          <option value="corrige">CorrigÃ©</option>
          <option value="validee">ValidÃ©</option>
          <option value="abandonnee">AbandonnÃ©</option>
        </select>
      </div>
    </div>

    <!-- Format dâ€™export -->
    <label for="export-format">Format :</label>
    <select id="export-format">
      <option value="csv">CSV</option>
      <option value="xlsx">Excel</option>
      <option value="pdf">PDF</option>
    </select>
    <fieldset id="export-columns">
      <legend>Colonnes Ã  inclure :</legend>
      <label><input type="checkbox" name="col" value="id" checked> ID</label>
      <label><input type="checkbox" name="col" value="created_by_email" checked> Utilisateur</label>
      <label><input type="checkbox" name="col" value="modified_by_email"> ModifiÃ© par (email)</label>
      <label><input type="checkbox" name="col" value="etage" checked> Ã‰tage</label>
      <label><input type="checkbox" name="col" value="chambre" checked> Chambre</label>
      <label><input type="checkbox" name="col" value="numero" checked> NÂ°</label>
      <label><input type="checkbox" name="col" value="lot" checked> Lot</label>
      <label><input type="checkbox" name="col" value="intitule" checked> IntitulÃ©</label>
      <label><input type="checkbox" name="col" value="description"> Description</label>
      <label><input type="checkbox" name="col" value="etat" checked> Ã‰tat</label>
      <label><input type="checkbox" name="col" value="entreprise" checked> Entreprise</label>
      <label><input type="checkbox" name="col" value="localisation"> Localisation</label>
      <label><input type="checkbox" name="col" value="observation" checked> Observation</label>
      <label><input type="checkbox" name="col" value="date_butoir"> Date butoir</label>
      <label><input type="checkbox" name="col" value="photos" checked> Photos (tous les liens)</label>
      <label><input type="checkbox" name="col" value="videos" checked> VidÃ©os (tous les liens)</label>
      <label><input type="checkbox" name="col" value="levee_fait_par_email" checked> LevÃ©e â€“ Fait par</label>
      <label><input type="checkbox" name="col" value="levee_fait_le" checked> LevÃ©e â€“ Fait le</label>
      <label><input type="checkbox" name="col" value="levee_commentaire" checked> LevÃ©e â€“ Commentaire</label>
      <label><input type="checkbox" name="col" value="levee_photos" checked> LevÃ©e â€“ Photos</label>
    </fieldset>
    <!-- Nouveau bouton Export -->
    <button id="exportBtn">Exporter</button>

    <div id="plan-container">
      <img id="plan" src="plan-r5.png" alt="Plan Ã©tage" />
      <div id="bulles-container"></div>
    </div>
  </div>

  <script src="script.js"></script>
  <script src="selection.js"></script>
</body>
</html>
